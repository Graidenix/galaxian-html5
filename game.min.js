!function(t){function e(s){if(i[s])return i[s].exports;var o=i[s]={exports:{},id:s,loaded:!1};return t[s].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){var s=i(11);window.Game=s},function(t,e){function i(t){return this.src=t,this._init(),this}i.prototype._init=function(){this.audio=new Audio,this.audio.src=this.src},i.prototype.play=function(){this.audio.loop=!1,this.audio.play()},i.prototype.loop=function(){this.audio.loop=!0,this.audio.play()},i.prototype.stop=function(){this.audio.pause(),this.audio.currentTime=0},t.exports=i},function(t,e){function i(t){var e=this;e.ctx=window.game.ctx,e.width=t.width,e.height=t.height,e.animate=void 0===t.animate?!0:t.animate,e.line=t.line||0,e.frames=t.frames||1,e.fps=t.fps||e.frames,e.frame=t.frame||0,e.timeFrames=Math.floor(24/this.fps*this.frame),e._init(t.src)}i.prototype._init=function(t){var e=new Image;e.src=t,this.spaceshipTx=e},i.prototype.next=function(){this.timeFrames++,this.frame=Math.floor(this.timeFrames*this.fps/24)%this.frames,this.frame>=this.frames&&(this.timeFrames=0)},i.prototype.draw=function(t,e){var i=this;i.animate&&i.next(),i.ctx.drawImage(i.spaceshipTx,i.frame*i.width,i.line*i.height,i.width,i.height,t,e,i.width,i.height)},t.exports=i},function(t,e,i){function s(t,e,i){if(this.constructor===s)throw new Error("Can't instantiate abstract class!");this.pos={x:t,y:e},this.state=2,this.spaceshipTx=new o({width:22,height:22,frame:i%3,frames:3,line:this.txId,src:"./assets/img/aliens-state.gif"}),this.jumpLTx=new o({width:24,height:24,frames:9,line:2*this.txId,src:"./assets/img/aliens-move.gif"}),this.jumpRTx=new o({width:24,height:24,frames:9,line:2*this.txId+1,src:"./assets/img/aliens-move.gif"}),this.explosionTx=new o({width:32,height:32,frames:4,fps:8,src:"./assets/img/aliens-die.gif"}),this.explodeSfx=new n("./assets/sfx/explode.wav")}var o=i(2),n=i(1);s.DEAD=0,s.INJURED=1,s.ALIVE=2,s.JUMP_L=3,s.JUMP_R=4,s.prototype._isInjured=function(){var t=window.game.screen.ship.bullet,e=this.pos;return t.x>e.x&&t.x<e.x+22&&t.y>e.y&&t.y<e.y+22},s.prototype.isAlive=function(){if(this.state===s.DEAD)return!1;if(!this._isInjured())return!0;this.explode();var t=window.game.screen.ship;return t.readyState=!0,t.bullet={x:0,y:0},window.game.player.addPts(this.score),!0},s.prototype.explode=function(){var t=this;this.state=s.INJURED,this.explodeSfx.play(),this.expPos={x:this.pos.x-5,y:this.pos.y-5},setTimeout(function(){t.state=s.DEAD},500)},s.prototype.jump=function(){self.state=s.JUMP_L},s.prototype.draw=function(){switch(this.state){case s.DEAD:console.log("Alien dead");break;case s.INJURED:this.explosionTx.draw(this.expPos.x,this.expPos.y);break;case s.ALIVE:this.spaceshipTx.draw(this.pos.x,this.pos.y);break;case s.JUMP_L:this.jumpLTx.draw(this.pos.x-1,this.pos.y-1);break;case s.JUMP_R:this.jumpRTx.draw(this.pos.x-1,this.pos.y-1)}},t.exports=s},function(t,e,i){function s(){this.option=1,this._init()}var o=i(16),n=i(2),r=i(1);s.prototype._init=function(){this.mainSound=new r("./assets/sfx/main.mp3"),this.mainSound.play(),this.logo=new n({width:288,height:88,src:"./assets/img/logo.gif"})},s.prototype.select=function(){var t=window.game.text,e=window.game.ctx,i=1===this.option?262:286;t.setColor(6),t.setFont(14),e.textAlign="left",e.fillText("1 PLAYER",252,262),e.fillText("2 PLAYERS",252,286),t.setColor(15),e.fillText("▶",224,i)},s.prototype.copyright=function(){var t=window.game.text,e=window.game.ctx;t.setColor(5),t.setFont(13),e.textAlign="center",e.fillText("NAMCO©",320,330)},s.prototype.footer=function(){var t=window.game.text,e=window.game.ctx;t.setColor(3),t.setFont(13),e.textAlign="center",e.fillText("© 1979 1996 NAMCO LTD",320,360),e.fillText("ALL RIGHTS RESERVED",320,380)},s.prototype.draw=function(){this.logo.draw(176,128),this.select(),this.copyright(),this.footer()},s.prototype.send=function(t){"UP"===t&&2===this.option?this.option=1:"DOWN"===t&&1===this.option?this.option=2:"START"===t&&this.start()},s.prototype.start=function(){var t=window.game;this.mainSound.stop(),t.players=[];for(var e=0;e<this.option;e++)t.players.push(new o(e+1));t.player=t.players[0],t.screen=t.getScreen("ready")},t.exports=s},function(t,e){function i(){this.ctx=window.game.ctx}const s=["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua"];i.prototype.setColor=function(t){this.ctx.fillStyle=s[t]},i.prototype.setFont=function(t){this.ctx.font=t+"px NES, sans-serif"},t.exports=i},function(t,e){function i(){"use strict"}i.prototype.up=function(){"use strict"},i.prototype.down=function(){"use strict"},i.prototype.right=function(){"use strict"},i.prototype.left=function(){"use strict"},i.prototype.start=function(){"use strict"},i.prototype.fire=function(){"use strict"},i.get=function(t){"use strict";switch(t){case 38:case 87:return"UP";case 40:case 83:return"DOWN";case 37:case 65:return"LEFT";case 39:case 68:return"RIGHT";case 32:return"FIRE";case 13:return"START";case 27:return"PAUSE"}},t.exports=i},function(t,e,i){function s(){this.stars=[],this.ctx=window.game.ctx}var o=i(10);s.prototype.createStars=function(){for(var t=Math.round(Math.random()),e=0;t>e;e++)this.stars.push(o.generate());this.stars=this.stars.filter(function(t){return t.isLive()})},s.prototype.draw=function(){window.game.text.setColor(0),this.ctx.fillRect(0,0,640,480),this.stars.forEach(function(t){t.draw()})},s.prototype.next=function(){this.clean(),this.stars.forEach(function(t){t.next()}),this.createStars(),this.draw()},s.prototype.clean=function(){this.ctx.clearRect(0,0,640,480)},t.exports=s},function(t,e,i){function s(){this.lifeSprite=new n({width:22,height:28,src:"./assets/img/footer.gif"}),this.stageSprite=new n({width:16,height:28,line:1,src:"./assets/img/footer.gif"})}var o=i(4),n=i(2);s.prototype.lifes=function(){for(var t=window.game.player,e=1;e<t.lifes;e++){var i=8+32*e;this.lifeSprite.draw(i,430)}},s.prototype.stage=function(){for(var t=window.game.player,e=0;e<t.stage;e++){var i=584-16*e;this.stageSprite.draw(i,430)}},s.prototype.draw=function(){window.game.screen instanceof o||(this.lifes(),this.stage())},t.exports=s},function(t,e){function i(){this.highScore=localStorage.getItem("highscore")||5e3}i.prototype.setHighScore=function(t){this.highScore=t,localStorage.setItem("highscore",t)},i.prototype.draw=function(){var t=window.game.text,e=window.game.ctx;t.setColor(5),e.textAlign="center",e.textBaseline="top",e.fillText("HI-SCORE",320,80),t.setColor(13),e.fillText(this.highScore,320,94)},t.exports=i},function(t,e){function i(t,e,i,s){this.x=t,this.y=e||0,this.speed=i||1,this.size=s||1}i.prototype.next=function(){this.y+=this.speed},i.prototype.isLive=function(){return this.y<480},i.prototype.draw=function(){window.game.text.setColor(3),window.game.ctx.fillRect(this.x,this.y,this.size,this.size)},i.generate=function(){var t=Math.ceil(640*Math.random()),e=Math.ceil(8*Math.random()),s=2*Math.random();return new i(t,0,e,s)},t.exports=i},function(t,e,i){function s(t){window.game=this,t.font="12px NES, sans-serif",this.ctx=t,this.screen=null,this.screens={},this.text=new a,this.background=new o,this.hud=new n,this.footer=new r,this.pauseState=this.getScreen("home"),this.players=[],this.start()}var o=i(7),n=i(9),r=i(8),a=i(5),h=i(6),p=i(23);s.prototype.getScreen=function(t){return this.screens[t]||(this.screens[t]=p.build(t)),this.screens[t]},s.prototype.pause=function(){this.interval?(clearInterval(this.interval),this.pauseState=this.screen,this.screen=this.getScreen("pause"),this.screen.draw(),this.interval=null):this.start()},s.prototype.start=function(){if(!this.interval){this.screen=this.pauseState,this.pauseState=null;var t=this;this.interval=setInterval(function(){t.next(),t.draw()},1e3/24)}},s.prototype.over=function(){this.screen=this.getScreen("over")},s.prototype.defineGamepad=function(){document.addEventListener("keydown",function(t){if(-1!==[37,38,39,40,87,83,65,86,32,13,27].indexOf(t.which)){var e=h.get(t.which);return"PAUSE"===e?window.game.pause():window.game.screen.send(e)}})},s.prototype.draw=function(){this.players.forEach(function(t){t.draw()}),this.hud.draw(),this.screen.draw(),this.footer.draw()},s.prototype.next=function(){this.background.next()},t.exports=s},function(t,e,i){function s(){this.txId=3,this.score=150,o.apply(this,arguments)}var o=i(3);s.prototype=Object.create(o.prototype),s.prototype.constructor=s,t.exports=s},function(t,e,i){function s(){this.txId=0,this.score=60,o.apply(this,arguments)}var o=i(3);s.prototype=Object.create(o.prototype),s.prototype.constructor=s,t.exports=s},function(t,e,i){function s(){this.txId=2,this.score=80,o.apply(this,arguments)}var o=i(3);s.prototype=Object.create(o.prototype),s.prototype.constructor=s,t.exports=s},function(t,e,i){function s(){this.txId=1,this.score=100,o.apply(this,arguments)}var o=i(3);s.prototype=Object.create(o.prototype),s.prototype.constructor=s,t.exports=s},function(t,e){function i(t){this.id=t,this.score="00",this.stage=1,this.lifes=3}i.prototype.addPts=function(t){this.score=parseInt(this.score)+t,this.score>window.game.hud.highScore&&window.game.hud.setHighScore(this.score)},i.prototype.draw=function(){var t=window.game.text,e=window.game.ctx,i=1===this.id?80:500;t.setColor(5),e.textAlign="left",e.textBaseline="top",e.fillText(this.id+"UP",i,80),t.setColor(3),e.textAlign="right",e.fillText(this.score,i+80,94)},t.exports=i},function(t,e,i){function s(){this.pos={x:320,y:384},this.bullet={x:320,y:384},this.readyState=!0,this.state=2,this.shipImg=new o({width:26,height:39,frames:2,animate:!1,src:"./assets/img/ship.gif"}),this.shipExplode=new o({width:64,height:64,frames:4,fps:4,src:"./assets/img/ship-explode.gif"}),this.fireSfx=new n("./assets/sfx/fire.wav")}var o=i(2),n=i(1);s.prototype.draw=function(){2==this.state?(this.readyState||this.drawBullet(),this.shipImg.draw(this.pos.x,this.pos.y)):1==this.state&&this.shipExplode.draw(this.pos.x-18,this.pos.y-19)},s.prototype.left=function(){this.pos.x-=8,this.pos.x<40&&(this.pos.x=40)},s.prototype.right=function(){this.pos.x+=8,this.pos.x>574&&(this.pos.x=574)},s.prototype.fire=function(){if(this.readyState){var t=this;t.fireSfx.play(),t.shipImg.frame=1,t.readyState=!1,t.bullet={x:t.pos.x+13,y:t.pos.y}}},s.prototype.drawBullet=function(){var t=this,e=window.game.ctx;t.bullet.y-=15,t.bullet.y<0&&(t.fireSfx.stop(),t.shipImg.frame=0,t.readyState=!0),e.strokeStyle="yellow",e.lineWidth=2,e.beginPath(),e.moveTo(t.bullet.x,t.bullet.y),e.lineTo(t.bullet.x,t.bullet.y-7),e.stroke()},s.prototype.explode=function(){var t=this;t.state=1,setTimeout(function(){window.game.screen.ship=!1;var t=window.game.player;t.lifes--;var e=t.lifes<=0?"over":"ready";window.game.screen=window.game.getScreen(e),window.game.screen._init()},1e3)},t.exports=s},function(t,e,i){function s(){this.aliens=[],this.grid=[],this.dir=1,this.velocity=2,this.waveSfx=new h("./assets/sfx/wave.mp3"),this._init()}var o=i(13),n=i(14),r=i(15),a=i(12),h=i(1);s.prototype._init=function(){var t,e,i,s,h,p,c=120;for(p=[],t=0;2>t;t++)i=142+102*t,h=new a(i,c,0),this.aliens.push(h),p.push(h);for(this.grid.push(p),p=[],t=0;6>t;t++)i=108+34*t,h=new r(i,c+28,t),this.aliens.push(h),p.push(h);for(this.grid.push(p),p=[],t=0;8>t;t++)i=74+34*t,h=new n(i,c+56,t+1),this.aliens.push(h),p.push(h);for(this.grid.push(p),e=0;3>e;e++){for(p=[],t=0;10>t;t++)i=40+34*t,s=c+28*(e+3),h=new o(i,s,t+2),this.aliens.push(h),p.push(h);this.grid.push(p)}this.waveSfx.loop()},s.prototype.next=function(){var t=this,e=t.aliens.every(function(e){var i=e.pos.x+t.dir*t.velocity;return 578>i&&i>40});e||(t.dir*=-1),t.aliens=t.aliens.map(function(e){return e.pos.x=e.pos.x+t.dir*t.velocity,e})},s.prototype.draw=function(){var t=this;t.aliens=t.aliens.filter(function(t){return t.isAlive()}),t.aliens.forEach(function(t){t.draw()}),t.next()},t.exports=s},function(t,e,i){function s(){this._init()}var o=i(17),n=i(18);s.prototype._init=function(){this.ship=this.ship||new o,this.swarm=this.swarm||new n},s.prototype.draw=function(){var t=window.game;this.swarm.draw(),this.ship.draw(),0===this.swarm.aliens.length&&(this.swarm=null,t.player.stage++,t.screen=t.getScreen("ready"),t.screen._init())},s.prototype.send=function(t){"LEFT"==t?this.ship.left():"RIGHT"==t?this.ship.right():"FIRE"===t?this.ship.fire():"DOWN"===t&&this.ship.explode()},t.exports=s},function(t,e){function i(){this._init()}i.prototype._init=function(){},i.prototype.draw=function(){var t=window.game.text,e=window.game.ctx;t.setColor(5),e.textAlign="center",e.textBaseline="middle",e.fillText("GAME OVER",320,240)},i.prototype.send=function(t){"START"===t&&(window.game.screen=window.game.getScreen("home"))},t.exports=i},function(t,e){function i(){this._init()}i.prototype._init=function(){},i.prototype.draw=function(){var t=window.game.text,e=window.game.ctx;t.setColor(0),e.globalAlpha=.5,e.fillRect(0,0,640,480),e.globalAlpha=1,t.setColor(3),e.textAlign="center",e.textBaseline="middle",e.fillText("PAUSE",320,240)},i.prototype.send=function(){},t.exports=i},function(t,e,i){function s(){this._init()}var o=i(1);s.prototype._init=function(){var t=new o("./assets/sfx/intro.wav");setTimeout(function(){t.play(),window.game.screen=window.game.getScreen("game"),window.game.screen._init()},1500)},s.prototype.draw=function(){var t=window.game.text,e=window.game.ctx,i=window.game.player;t.setColor(5),e.textAlign="center",e.textBaseline="middle",e.fillText("PLAYER "+i.id,320,240),e.fillText("READY",320,260)},s.prototype.send=function(){},t.exports=s},function(t,e,i){function s(){}var o=i(22),n=i(19),r=i(20),a=i(4),h=i(21);s.build=function(t){switch(t){case"ready":return new o;case"game":return new n;case"over":return new r;case"home":return new a;case"pause":return new h}},t.exports=s}]);